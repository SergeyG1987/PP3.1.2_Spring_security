<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head><meta charset="UTF-8"><title>Пользователи</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"></head>
<body><div class="container mt-4"><h1>Список пользователей</h1>
    <div class="mb-3"><a href="/admin/users/new" class="btn btn-success">Добавить</a><a href="/" class="btn btn-primary">Главная</a>
        <a href="/user/profile" class="btn btn-info">Профиль</a><form th:action="@{/logout}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger">Выйти</button></form></div>
    <table class="table table-striped"><thead><tr><th>ID</th><th>Имя</th><th>Email</th><th>Роли</th><th>Действия</th></tr></thead>
        <tbody><tr th:each="user : ${users}"><td th:text="${user.id}"></td><td th:text="${user.name}"></td><td th:text="${user.email}"></td>
            <td><span th:each="role, iter : ${user.roles}" th:text="${role.name} + (${iter.last} ? '' : ', ')"></span></td>
            <td><a th:href="@{/admin/users/edit/{id}(id=${user.id})}" class="btn btn-warning btn-sm">Редактировать</a>
                <a th:href="@{/admin/users/delete/{id}(id=${user.id})}" class="btn btn-danger btn-sm" onclick="return confirm('Удалить?')">Удалить</a></td></tr></tbody></table></div></body></html>